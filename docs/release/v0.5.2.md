# MSP v0.5.2 Release Notes / 发布说明

## 核心更新
- Go 原生跨平台构建
  - 新增脚本参数：支持按需选择平台与架构，默认仅生成 Windows x64
  - 产物统一生成校验（SHA256）与调试拷贝目录，便于分发与符号管理
- CI 工作流（GitHub Actions）
  - 默认生成全部平台与架构，并将产物与校验文件打到 Release
  - 支持推送标签触发或手动填入版本与说明
- 路径跨平台规范化
  - 后端统一使用 NormalizePath / WithinRoot / SamePath，避免 Windows 专属逻辑在 Linux/macOS 下出现误判
  - 共享目录的校验与同路径判断在各平台保持安全与正确
- 前端平台提示优化
  - 共享目录对话框的路径占位符根据操作系统自动切换（Windows / macOS / Linux）
  - 提示文案统一为“系统文件夹选择器不可用”的通用措辞
- 文档与忽略规则
  - README/README_CN 增加跨平台构建章节与产物目录说明
  - .gitignore 增加 checksums/、debug/、release_out/ 等目录忽略
  - Wiki 增补 Home/Build/Release 页面

## CI 工作流调整
- 统一为单一 Ubuntu 作业构建所有目标，减少重复时间与前后端安装步骤
- 默认生成：Windows x64/x86、Linux amd64/arm64、ARM v7/v8、macOS amd64/arm64
- macOS universal 作为可选项（需在 macOS 环境或独立作业上执行 `lipo` 合并）

## 构建与产物（Go 原生）
- 脚本：`scripts/build.ps1` / `scripts/build.sh`
  - 默认：Windows x64（`scripts/build.ps1` 或 `scripts/build.sh`）
  - 指定（示例）：
    - Windows：`scripts/build.ps1 -Platforms windows -Architectures x64,x86`
    - Linux/macOS：`scripts/build.sh -Platforms windows,linux,macos,arm -Architectures x64,x86,amd64,arm64,v7,v8`
- 输出目录
  - Windows：`bin/windows/x64/msp-windows-amd64.exe`、`bin/windows/x86/msp-windows-386.exe`
  - Linux：`bin/linux/amd64/msp-linux-amd64`、`bin/linux/arm64/msp-linux-arm64`
  - ARM：`bin/arm/v7/msp-arm-v7`、`bin/arm/v8/msp-arm-v8`
  - macOS：`bin/macos/msp-macos-amd64`、`bin/macos/msp-macos-arm64`（可在 macOS 上合并 universal）
  - 校验：`checksums/`，调试拷贝：`debug/`

## 兼容性与可选增强
- Linux glibc 2.17 动态链接（可选）
  - 纯 Go 构建不依赖 glibc；如需 glibc 2.17 动态链接版本，建议在 CentOS 7 镜像内启用 CGO 与 gcc 构建
- macOS universal / 签名（可选）
  - 在 macOS 主机使用 `lipo` 合并后，用有效开发者证书对 universal 或 .app 进行签名
- Windows 签名与安装包（可选）
  - 使用 signtool 对 exe 加签；NSIS/WiX 生成安装包

## English Summary
- Go-native cross compilation:
  - Script now supports selectable platforms/architectures; default builds Windows x64 only
  - Unified checksums and debug copies for distribution
- CI builds all targets by default and attaches artifacts to Release
- Cross-platform path normalization in backend; OS-specific placeholders in frontend
- Docs updated, ignores enriched; Wiki adds Home/Build/Release pages
