# v0.5.8

## 核心变更 (Core Changes)

- **Context 上下文重构**：
  - 后端架构全面升级为 `context.Context` 驱动，支持全链路的请求生命周期管理。
  - 数据库操作 (`DB`)、媒体扫描 (`Scanner`)、缓存构建 (`Media`) 和 HTTP 处理 (`Handler`) 现已支持超时控制与优雅取消。
  - 优化了长时间运行任务（如大目录扫描）的资源释放机制。

## 修复 (Fixes)

- **安全性增强**：
  - 修复了 `gosec` 扫描报告的 SQL 拼接误报 (G202)，通过代码审查确认了参数化查询的安全性并添加了豁免注释。
- **稳定性修复**：
  - 修复了 `Server.SetupLogger` 初始化时的返回值签名错误。
  - 修复了 `internal/media` 包中缺失 `context` 依赖导致的编译错误。

## 开发者 (Developers)

- 所有涉及 IO 或长耗时的内部接口现在都要求首个参数为 `context.Context`。
- 建议在进行数据库查询或文件操作时，优先使用带 Context 的 API（如 `QueryContext`, `ExecContext`）。
